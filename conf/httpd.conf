#
# This is configuration file for Apache HTTP server which is
# part of VisualSVN Server.
#
# DO NOT EDIT THIS FILE IT WILL BE REGENERATED AUTOMATICALLY BY VISUALSVN SERVER
#
# Contact with VisualSVN Ltd. (support@visualsvn.com) if you have suggestions and
# improvements.
#

ThreadsPerChild 128
MaxMemFree 64
MaxRequestsPerChild  0
MaxKeepAliveRequests 0
KeepAliveTimeout 5
Win32DisableAcceptEx
LimitXMLRequestBody 8000000
LimitRequestFieldSize 16384
SendBufferSize 131072

ServerRoot "F:/tools"
ServerName "PC-20180213FDJR:8443"
ServerSignature Off
ServerTokens Prod
DocumentRoot "htdocs"
FileETag MTime Size

ExpiresActive on
ExpiresDefault access

PidFile "${TEMP}\VisualSVNServer.pid"

Listen "8443"

LoadModule auth_basic_module bin/mod_auth_basic.so
LoadModule authn_file_module bin/mod_authn_file.so
LoadModule authz_user_module bin/mod_authz_user.so
LoadModule authn_visualsvn_module bin/mod_authn_visualsvn.so
LoadModule authz_svn_module bin/mod_authz_svn.so
LoadModule alias_module bin/mod_alias.so
LoadModule dir_module bin/mod_dir.so
LoadModule mime_module bin/mod_mime.so
LoadModule setenvif_module bin/mod_setenvif.so
LoadModule rewrite_module bin/mod_rewrite.so
LoadModule expires_module bin/mod_expires.so

LoadModule dav_module bin/mod_dav.so
LoadModule dav_svn_module bin/mod_dav_svn.so
LoadModule ssl_module bin/mod_ssl.so

<Directory />
  Options FollowSymLinks
  AllowOverride None

  RewriteEngine on
  RewriteCond %{REQUEST_URI} ^/svn$
  RewriteCond %{HTTP_USER_AGENT} !^SVN/
  RewriteRule ^(.*/svn)$ %0/ [R=301,L]
</Directory>

RewriteEngine on
RewriteCond %{REQUEST_METHOD}  =GET  [OR]
RewriteCond %{REQUEST_METHOD}  =HEAD
RewriteRule "^/favicon.ico$" "/!/assets/img/favicon.ico" [PT,NS]

<Location />
  AuthName "VisualSVN Server"
  AuthType Basic
  AuthBasicProvider file
  AuthUserFile "F:/Repositories/htpasswd"

  Require valid-user
</Location>

SVNInMemoryCacheSize 32768

<Location "/svn/">
  DAV svn

  SVNListParentPath on
  SVNParentPath "F:/Repositories/"
  SVNIndexXSLT "/!/assets/xsl/svnindex-ng.xsl?v=1"

  SVNPathAuthz short_circuit

  SVNCacheTextDeltas off
  SVNCacheFullTexts off
  SVNCacheRevProps off

  SVNAllowBulkUpdates prefer

  AuthName "VisualSVN Server"
  AuthzSVNReposRelativeAccessFile "VisualSVN-SvnAuthz.ini"
  AuthzSVNGroupsFile "F:/Repositories/groups.conf"

  ExpiresActive off
</Location>

Alias /! WebUI
<Location /!>
  AuthzSVNAuthoritative off
  SVNOverrideAll on
  DAV off
  ExpiresActive on
</Location>

<Location /!/assets>
  ExpiresDefault A31104000
</Location>

<Location /!/assets/img/favicon.ico>
  ExpiresDefault A604800
</Location>

<IfModule dir_module>
    DirectoryIndex index.html
</IfModule>

ErrorLog nul

LogLevel error

TraceEnable off

DefaultType text/plain

<IfModule mime_module>
    TypesConfig conf/mime.types
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz
    AddType application/x-x509-ca-cert .crt
    AddType application/x-pkcs7-crl    .crl
    AddType "text/css; charset: UTF-8" .css
</IfModule>

<IfModule ssl_module>
SSLEngine on

SSLRandomSeed startup   builtin
SSLRandomSeed connect   builtin
SSLPassPhraseDialog     builtin
SSLSessionCache         "shm:F:/Repositories/ssl_scache"
SSLSessionCacheTimeout  7200
SSLMutex                default
SSLCertificateFile      certs/server.pem
SSLCertificateKeyFile   certs/server.pem
SSLCertificateChainFile certs/certchain.pem
SSLProtocol             -ALL +TLSv1 +TLSv1.1 +TLSv1.2
SSLHonorCipherOrder     on
SSLCipherSuite          ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA256:AES128-GCM-SHA256:AES128-SHA256:AES256-GCM-SHA384:AES256-SHA256:ECDHE-ECDSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA:AES128-SHA:AES256-SHA:ECDHE-ECDSA-DES-CBC3-SHA:ECDHE-RSA-DES-CBC3-SHA:DES-CBC3-SHA:!aNULL:!eNULL:!LOW:!EXP:!RC4


</IfModule>

Include conf/httpd-custom.conf

